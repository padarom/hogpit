import{h as C,i as g}from"./q-BQP7Lu-e.js";import{g as O}from"./q-BQP7Lu-e.js";import{t as b,p as c,i as f,d as m,e as n,f as R,r as _,h as w,l as E,j as I}from"./q-Bt26BrCF.js";import{c as L,m as x,r as $}from"./q-DCpN1cAi.js";import"./q-uemlvruI.js";const k=async(r,s)=>{const[d,p,i,u]=C(),{type:a="link",forceReload:l=r===void 0,replaceState:v=!1,scroll:h=!0}=typeof s=="object"?s:{forceReload:s};n.navCount++;const t=i.value.dest,e=r===void 0?t:typeof r=="number"?r:b(r,u.url);if(c.$cbs$&&(l||typeof e=="number"||!f(e,t)||!m(e,t))){const o=n.navCount,y=await Promise.all([...c.$cbs$.values()].map(S=>S(e)));if(o!==n.navCount||y.some(Boolean)){o===n.navCount&&a==="popstate"&&history.pushState(null,"",t);return}}if(typeof e=="number"){history.go(e);return}if(!m(e,t)){location.href=e.href;return}if(!l&&f(e,t)){{a==="link"&&e.href!==location.href&&history.pushState(null,"",e);const o=document.getElementById(R)??document.documentElement;_(a,e,new URL(location.href),o,w()),a==="popstate"&&(window._qCityScrollEnabled=!0)}return}return i.value={type:a,dest:e,forceReload:l,replaceState:v,scroll:h},E(e,g()),I($,x,L,e.pathname),d.value=void 0,u.isNavigating=!0,new Promise(o=>{p.r=o})};export{O as _hW,k as s_V0VCYfdlQQo};
