import{h as y,i as x,B as j,C as E}from"./q-BQP7Lu-e.js";import{g as L}from"./q-BQP7Lu-e.js";import{J as b,K as q,L as _}from"./q-Bt26BrCF.js";import"./q-uemlvruI.js";const $=async function(...i){const[u,d,s,w,a]=y(),n=i.length>0&&i[0]instanceof AbortSignal?i.shift():void 0;{const c=x(),h=i.map(t=>t instanceof SubmitEvent&&t.target instanceof HTMLFormElement?new FormData(t.target):t instanceof Event||t instanceof Node?null:t),r=a.getHash();let l="";const f={...u,method:s,headers:{...d,"Content-Type":"application/qwik-json",Accept:"application/json, application/qwik-json, text/qwik-json-stream, text/plain","X-QRL":r},signal:n},m=await j([a,...h]);s==="GET"?l+=`&${_}=${encodeURIComponent(m)}`:f.body=m;const e=await fetch(`${w}?${b}=${r}${l}`,f),o=e.headers.get("Content-Type");if(e.ok&&o==="text/qwik-json-stream"&&e.body)return async function*(){try{for await(const t of q(e.body,c??document.documentElement,n))yield t}finally{n!=null&&n.aborted||await e.body.cancel()}}();if(o==="application/qwik-json"){const t=await e.text(),p=await E(t,c??document.documentElement);if(e.status>=400)throw p;return p}else if(o==="application/json"){const t=await e.json();if(e.status>=400)throw t;return t}else if(o==="text/plain"||o==="text/html"){const t=await e.text();if(e.status>=400)throw t;return t}}};export{L as _hW,$ as s_ASwRiM9o6Mo};
